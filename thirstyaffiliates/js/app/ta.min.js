var thirstyFunctions;jQuery(document).ready((function(t){thirstyFunctions={recordLinkStatEvents:function(){"yes"==thirsty_global_vars.enable_record_stats&&t("body").on("click","a",thirstyFunctions.recordLinkStat)},recordLinkStat:function(r){var a,e,i,o=t(this),n=o.attr("href"),s=o.data("linkid"),l=o[0].innerText,c=n?n.split("?")[1]:"";l||(l=o.text()),(thirstyFunctions.isThirstyLink(n)||s)&&(o.data("thirstypay")||(o.data("clicked")?r.preventDefault():(o.data("clicked",!0),!l&&o.find("img").length&&(l=(a=o.find("img").prop("src").split("/"))[a.length-1]),"yes"===thirsty_global_vars.enable_js_redirect&&1!=o.data("nojs")&&(r.preventDefault(),"_blank"!=o.prop("target")||thirstyFunctions.disableNewWindow()?window.MonsterInsightsObject&&setTimeout((function(){"function"==typeof window.onbeforeunload&&(i=window.onbeforeunload)}),50):e=window.open("","_blank")),t.post(thirsty_global_vars.ajax_url,{action:"ta_click_data_redirect",href:n,page:window.location.href,link_id:s,keyword:l,qs:c},(function(t){o.data("clicked",!1),"yes"===thirsty_global_vars.enable_js_redirect&&1!=o.data("nojs")&&(e?e.location.href=t||n:("function"==typeof i&&null===window.onbeforeunload&&(window.onbeforeunload=i),window.location.href=t||n))})).fail((function(){o.data("clicked",!1),"yes"===thirsty_global_vars.enable_js_redirect&&1!=o.data("nojs")&&(e?e.location.href=n:("function"==typeof i&&null===window.onbeforeunload&&(window.onbeforeunload=i),window.location.href=n))})))))},disableNewWindow:function(){var t=["FBAN","MessengerForiOS","FBAV","Instagram","Pinterest","Twitter","Electron","Steam"];for(var r in t)if(navigator.userAgent.indexOf(t[r])>=0)return!0;return!1},isThirstyLink:function(a){if(a){var e,i,o=(a=a.replace("http:","{protocol}").replace("https:","{protocol}")).replace(thirsty_global_vars.home_url,"").replace("{protocol}","");return e=(o=0==o.indexOf("/")?o.replace("/",""):o).substr(0,o.indexOf("/")),i=a.replace("/"+e+"/","/"+thirsty_global_vars.link_prefix+"/").replace("{protocol}",window.location.protocol),!!(e&&t.inArray(e,r)>-1)&&i}},linkFixer:function(){if("yes"===thirsty_global_vars.link_fixer_enabled){var r,a,e,i,o,n=t("body a"),s=[];for(o=0;o<n.length;o++)r=t(n[o]).attr("href"),a=t(n[o]).attr("class"),e=t(n[o]).data("shortcode"),i=t(n[o]).has("img").length,(r=thirstyFunctions.isThirstyLink(r))&&!e&&s.push({key:o,class:a,href:r,is_image:i}),t(n[o]).removeAttr("data-shortcode");s.length<1||t.post(thirsty_global_vars.ajax_url,{action:"ta_link_fixer",hrefs:s,post_id:thirsty_global_vars.post_id},(function(r){if("success"==r.status)for(var a in r.data)if("object"==typeof r.data[a]){var e,i=r.data[a].key,o=t(n[i]).prop("href"),s=o?o.split("?")[1]:"",l=r.data[a].href,c=r.data[a].title,d=r.data[a].class,p=r.data[a].thirstypay;s&&r.data[a].pass_qs&&(e=l.indexOf("?")<0?"?":"&",l=l+e+s),l=l.replace("http:",window.location.protocol).replace("https:",window.location.protocol),c?t(n[i]).prop("title",c):t(n[i]).removeAttr("title"),"yes"==thirsty_global_vars.disable_thirstylink_class&&(d=d.replace("thirstylinkimg","").replace("thirstylink","").trim()),d?t(n[i]).prop("class",d):t(n[i]).removeAttr("class"),t(n[i]).prop("href",l).prop("rel",r.data[a].rel).prop("target",r.data[a].target).attr("data-linkid",r.data[a].link_id),p&&t(n[i]).attr("data-thirstypay",!0),"yes"===thirsty_global_vars.enable_js_redirect&&t(n[i]).attr("data-nojs",r.data[a].nojs)}}),"json")}}};var r=t.map(thirsty_global_vars.link_prefixes,(function(t,r){return[t]}));thirstyFunctions.recordLinkStatEvents(),thirstyFunctions.linkFixer()}));